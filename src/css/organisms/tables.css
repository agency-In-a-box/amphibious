/* ==========================================================================
   Tables Component - Amphibious 2.0
   Unified table styles with responsive behavior
   Consolidates all table variants into one standard component
   ========================================================================== */

/* Table Design Tokens
   ========================================================================== */

:root {
  /* Table Colors */
  --table-bg: #ffffff;
  --table-text: #333333;
  --table-border: #e5e7eb;
  --table-header-bg: #f9fafb;
  --table-header-text: #111827;
  --table-row-hover: #f3f4f6;
  --table-row-striped: #f9fafb;

  /* Semantic Colors */
  --table-success-bg: #d1fae5;
  --table-warning-bg: #fed7aa;
  --table-error-bg: #fee2e2;
  --table-info-bg: #dbeafe;

  /* Spacing */
  --table-padding-x: 1rem;
  --table-padding-y: 0.75rem;
  --table-compact-padding: 0.5rem;

  /* Typography */
  --table-font-size: 0.875rem;
  --table-header-font-weight: 600;

  /* Borders */
  --table-border-width: 1px;
  --table-border-radius: 0.5rem;

  /* Responsive */
  --table-mobile-label-width: 40%;
}

/* Base Table Styles
   ========================================================================== */

table {
  width: 100%;
  margin: 1.5rem 0;
  border-collapse: collapse;
  background: var(--table-bg);
  font-size: var(--table-font-size);
}

/* Table wrapper for responsive behavior */
.table-wrapper {
  overflow-x: auto;
  -webkit-overflow-scrolling: touch;
  margin: 1.5rem 0;
}

.table-wrapper table {
  margin: 0;
}

/* Caption */
table caption {
  padding: var(--table-padding-y) 0;
  color: var(--color-text-light, #6b7280);
  font-style: italic;
  caption-side: top;
  text-align: left;
}

/* Table Headers */
table thead th {
  padding: var(--table-padding-y) var(--table-padding-x);
  background: var(--table-header-bg);
  color: var(--table-header-text);
  font-weight: var(--table-header-font-weight);
  text-align: left;
  border-bottom: 2px solid var(--table-border);
  white-space: nowrap;
}

/* Table Body */
table tbody td {
  padding: var(--table-padding-y) var(--table-padding-x);
  color: var(--table-text);
  border-bottom: var(--table-border-width) solid var(--table-border);
}

/* Table Footer */
table tfoot td,
table tfoot th {
  padding: var(--table-padding-y) var(--table-padding-x);
  font-weight: var(--table-header-font-weight);
  border-top: 2px solid var(--table-border);
  background: var(--table-header-bg);
}

/* Remove border from last row */
table tbody tr:last-child td {
  border-bottom: none;
}

/* Table Variants
   ========================================================================== */

/* Striped Rows - Using modern CSS, no jQuery needed */
.table-striped tbody tr:nth-child(odd),
.amp.striped tbody tr:nth-child(odd),
.amp.stripped tbody tr:nth-child(odd) {
  background: var(--table-row-striped);
}

/* Hover Rows */
.table-hover tbody tr:hover {
  background: var(--table-row-hover);
  cursor: pointer;
}

/* Bordered */
.table-bordered {
  border: var(--table-border-width) solid var(--table-border);
}

.table-bordered th,
.table-bordered td {
  border: var(--table-border-width) solid var(--table-border);
}

/* Borderless */
.table-borderless th,
.table-borderless td,
.table-borderless thead th,
.table-borderless tbody + tbody {
  border: 0;
}

/* Compact */
.table-compact th,
.table-compact td {
  padding: var(--table-compact-padding);
}

/* Rounded */
.table-rounded {
  border-radius: var(--table-border-radius);
  overflow: hidden;
  border: var(--table-border-width) solid var(--table-border);
}

.table-rounded thead tr:first-child th:first-child {
  border-top-left-radius: var(--table-border-radius);
}

.table-rounded thead tr:first-child th:last-child {
  border-top-right-radius: var(--table-border-radius);
}

/* Semantic Row States
   ========================================================================== */

tr.success,
.table-success {
  background: var(--table-success-bg);
}

tr.warning,
.table-warning {
  background: var(--table-warning-bg);
}

tr.error,
tr.danger,
.table-error,
.table-danger {
  background: var(--table-error-bg);
}

tr.info,
.table-info {
  background: var(--table-info-bg);
}

/* Sortable Tables
   ========================================================================== */

.table-sortable th {
  cursor: pointer;
  user-select: none;
  position: relative;
  padding-right: 2rem;
}

.table-sortable th::after {
  content: "↕";
  position: absolute;
  right: var(--table-padding-x);
  opacity: 0.3;
  transition: opacity 200ms;
}

.table-sortable th:hover::after {
  opacity: 0.6;
}

.table-sortable th.sort-asc::after {
  content: "↑";
  opacity: 1;
}

.table-sortable th.sort-desc::after {
  content: "↓";
  opacity: 1;
}

/* Responsive Tables
   ========================================================================== */

/* Method 1: Horizontal Scroll (default) */
@media (max-width: 767px) {
  .table-wrapper {
    border: var(--table-border-width) solid var(--table-border);
    border-radius: var(--table-border-radius);
  }

  .table-wrapper table {
    min-width: 500px; /* Prevent columns from getting too narrow */
  }
}

/* Method 2: Stack Layout */
@media (max-width: 767px) {
  .table-responsive thead {
    display: none;
  }

  .table-responsive tr {
    display: block;
    border: var(--table-border-width) solid var(--table-border);
    border-radius: var(--table-border-radius);
    margin-bottom: 1rem;
    padding: var(--table-padding-y);
  }

  .table-responsive td {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: var(--table-compact-padding) var(--table-padding-x);
    border: none;
    text-align: right;
  }

  .table-responsive td::before {
    content: attr(data-label);
    font-weight: var(--table-header-font-weight);
    text-align: left;
    width: var(--table-mobile-label-width);
    padding-right: 1rem;
  }

  .table-responsive tbody tr {
    background: var(--table-bg);
  }

  /* Maintain striping on mobile */
  .table-responsive.table-striped tbody tr:nth-child(odd) {
    background: var(--table-row-striped);
  }
}

/* Method 3: Scrollable with Fixed First Column */
.table-fixed-column {
  position: relative;
  overflow-x: auto;
}

@media (max-width: 767px) {
  .table-fixed-column table {
    margin-left: 120px;
  }

  .table-fixed-column thead th:first-child,
  .table-fixed-column tbody td:first-child {
    position: absolute;
    left: 0;
    width: 120px;
    background: var(--table-bg);
    border-right: 2px solid var(--table-border);
  }

  .table-fixed-column thead th:first-child {
    background: var(--table-header-bg);
  }
}

/* Utility Classes
   ========================================================================== */

/* Text Alignment */
.text-left {
  text-align: left;
}
.text-center {
  text-align: center;
}
.text-right {
  text-align: right;
}

/* Column Width Control */
.col-auto {
  width: auto;
}
.col-min {
  width: 1%;
  white-space: nowrap;
}
.col-25 {
  width: 25%;
}
.col-50 {
  width: 50%;
}
.col-75 {
  width: 75%;
}

/* Cell Utilities */
.no-wrap {
  white-space: nowrap;
}
.truncate {
  max-width: 200px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}

/* Accessibility
   ========================================================================== */

/* Screen reader only headers */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

/* Focus styles for keyboard navigation */
table tbody tr:focus {
  outline: 2px solid var(--color-primary, var(--color-primary));
  outline-offset: -2px;
}

/* Print Styles
   ========================================================================== */

@media print {
  table {
    page-break-inside: auto;
  }

  tr {
    page-break-inside: avoid;
    page-break-after: auto;
  }

  thead {
    display: table-header-group;
  }

  tfoot {
    display: table-footer-group;
  }
}

/* Dark Mode Support
   ========================================================================== */

@media (prefers-color-scheme: dark) {
  :root {
    --table-bg: #1f2937;
    --table-text: #f3f4f6;
    --table-border: #374151;
    --table-header-bg: #111827;
    --table-header-text: #f9fafb;
    --table-row-hover: #374151;
    --table-row-striped: #1f2937;
  }
}
